(this["webpackJsonptanks-front-end"]=this["webpackJsonptanks-front-end"]||[]).push([[0],{225:function(e,t,a){},240:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(81),s=a.n(c),o=(a(225),a(5)),i=a(13),l=a.n(i),u=a(24),d=a(3),j=a(9),b=a(111),g=a(87),x=a(79),p=a.n(x),h=a(315),m=a(253),O=a(107),f=a.n(O),v=a(112),y=a(160),k=a(320),T=a(326),w=a(82),S=a(254),M=a(26),C=Object(n.createContext)(null),P=Object(n.createContext)(null),E=Object(n.createContext)(null),I="https://api.ratizales.mx",N="https://api.ratizales.mx/private",L={LOGIN:"login",RESEND_CONFIRMATION_EMAIL:"resend_confirmation_email",SIGNUP:"signup",GETUSER:"getuser",FETCHTANKS:"fetchtanks",ADDTANK:"addtank",FETCHTANK:"fetchtank",DELETETANK:"deletetank",FETCHUSERS:"fetchusers",FETCHUSER:"fetchuser",UPDATEUSER:"updateuser",DELETEUSER:"deleteuser",FETCHHISTORIC:"fetch_historic"};function A(e){var t="";switch(console.log(e),e){case L.LOGIN:t="".concat(I,"/auth/login");break;case L.SIGNUP:t="".concat(I,"/auth/add-user");break;case L.GETUSER:t="".concat(I,"/auth/get-user");break;case L.FETCHTANKS:t="".concat(I,"/api/fetch-tanks");break;case L.FETCHTANK:t="".concat(I,"/api/fetch-tank");break;case L.ADDTANK:t="".concat(I,"/api/add-tank");break;case L.UPDATETANK:t="".concat(I,"/api/update-tank");break;case L.DELETETANK:t="".concat(I,"/api/delete-tank");break;case L.FETCHUSERS:t="".concat(I,"/api/fetch-users");break;case L.FETCHUSER:t="".concat(I,"/api/fetch-user");break;case L.UPDATEUSER:t="".concat(I,"/api/update-user");break;case L.DELETEUSER:t="".concat(I,"/api/delete-user");break;case L.FETCHHISTORIC:t="".concat(I,"/api/fetch-historic");break;case L.RESEND_CONFIRMATION_EMAIL:t="".concat(I,"/auth/resend-confirmation-email");break;default:t=""}return console.log(t),t}function D(e){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(l.a.mark((function e(t){var a,n,r,c,s,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],n=o.length>2?o[2]:void 0,r=A(t),c={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},a&&(c.headers={"Content-Type":"application/json",Authorization:"Bearer ".concat(n.accessToken)}),console.log("url:  "+r),console.log(n),e.next=9,fetch(r,c);case 9:return s=e.sent,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(l.a.mark((function e(t){var a,n,r,c,s,o,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]&&i[1],n=i.length>2&&void 0!==i[2]?i[2]:null,r=i.length>3&&void 0!==i[3]?i[3]:null,c=W(a,n),s=null,console.log(t),o=A(t),console.log(o),r){e.next=14;break}return e.next=11,fetch(o,c);case 11:s=e.sent,e.next=19;break;case 14:return console.log("".concat(o).concat(r)),console.log(c),e.next=18,fetch("".concat(o).concat(r),c);case 18:s=e.sent;case 19:return e.abrupt("return",s);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){var a={method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}};return e&&(a.headers={"Content-Type":"application/json",Authorization:"Bearer ".concat(t.accessToken)}),a}function F(e){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(l.a.mark((function e(t){var a,n,r,c,s,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],n=o.length>2?o[2]:void 0,r=A(t),c={method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},a&&(c.headers={"Content-Type":"application/json",Authorization:"Bearer ".concat(n.accessToken)}),console.log("----------DELETE OPTIONS----------"),console.log(c),e.next=9,fetch(r,c);case 9:return s=e.sent,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(l.a.mark((function e(t){var a,n,r,c,s,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],n=o.length>2?o[2]:void 0,r=A(t),c={method:"PUT",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},a&&(c.headers={"Content-Type":"application/json",Authorization:"Bearer ".concat(n.accessToken)}),console.log("----------PUT OPTIONS----------"),console.log(c),console.log(r),e.next=10,fetch(r,c);case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){var a="";switch(e){case L.FETCHTANK:a="?tankId=".concat(t.tankId);break;case L.FETCHUSERS:a="?company=".concat(t.company);break;case L.FETCHUSER:a="?email=".concat(t.email);break;case L.FETCHHISTORIC:a="?company=".concat(t.company);break;default:a=null}return a}function K(e){var t=Object(n.useState)(e),a=Object(o.a)(t,2);return[a[0],a[1],function(){var e=Object(u.a)(l.a.mark((function e(t,a,n,r){var c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null,"POST"!==t){e.next=7;break}return e.next=4,D(a,n,r);case 4:c=e.sent,e.next=24;break;case 7:if("GET"!==t){e.next=14;break}return s=G(a,r),e.next=11,V(a,n,r,s);case 11:c=e.sent,e.next=24;break;case 14:if("DELETE"!==t){e.next=20;break}return e.next=17,F(a,n,r);case 17:c=e.sent,e.next=24;break;case 20:if("PUT"!==t){e.next=24;break}return e.next=23,_(a,n,r);case 23:c=e.sent;case 24:return e.next=26,c.json();case 26:return e.abrupt("return",e.sent);case 27:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()]}var z=a(1);function q(){var e=Object(M.f)();document.title="Sign Up";var t=K({name:"",lastName:"",email:"",password:"",passwordVerify:"",company:""}),a=Object(o.a)(t,3),r=a[0],c=a[1],s=a[2],i=Object(n.useState)({showPassword:!1,showVerifyPassword:!1,buttonDisabled:!1,isBusy:"none",requestMessage:"",requestMsgColor:"#000000",passwordVerified:!1}),x=Object(o.a)(i,2),O=x[0],C=x[1],P=function(e,t){c(Object(j.a)(Object(j.a)({},r),{},Object(d.a)({},t,e.target.value)))},E=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,c,o,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n="",c="",o=null,i=null,u=r.password===r.passwordVerify,a.preventDefault(),C(Object(j.a)(Object(j.a)({},O),{},{isBusy:"block",buttonDisabled:!0})),!u){t.next=17;break}return t.next=11,s("POST",L.SIGNUP,!1,r);case 11:i=t.sent,console.log(i),c="User already registered"===i.msg||"Succesfully added user"===i.msg?"#03945f":"#940303",n=i.msg,t.next=19;break;case 17:n="Passwords do not match",c="#940303";case 19:C(Object(j.a)(Object(j.a)({},O),{},{isBusy:"none",buttonDisabled:!1,requestMessage:n,requestMsgColor:c})),o&&200===o.status&&e("/log-in"),t.next=28;break;case 23:t.prev=23,t.t0=t.catch(0),console.log(typeof t.t0),console.log(typeof t.t0.message),"Failed to fetch"===t.t0.message&&C(Object(j.a)(Object(j.a)({},O),{},{isBusy:"none",buttonDisabled:!1,requestMessage:"Please check your connection and try again",requestMsgColor:"#940303"}));case 28:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e){return t.apply(this,arguments)}}();return Object(z.jsx)("div",{style:{textAlign:"center",marginTop:"90px"},children:Object(z.jsxs)(m.a,{sx:{borderRadius:"20px",width:"70%",height:"auto",paddingTop:"20px",paddingBottom:"20px",marginLeft:"auto",marginRight:"auto",background:"rgba(232, 250, 255, 0)"},children:[Object(z.jsx)("h1",{children:"Sign Up"}),Object(z.jsx)("div",{children:Object(z.jsx)(b.a,{style:{width:"50%",marginBottom:"15px"},id:"outlined-basic",label:"Name",variant:"outlined",value:r.name,onChange:function(e){return P(e,"name")}})}),Object(z.jsx)("div",{children:Object(z.jsx)(b.a,{style:{width:"50%",marginBottom:"15px"},id:"outlined-basic",label:"Last Name",variant:"outlined",value:r.lastName,onChange:function(e){return P(e,"lastName")}})}),Object(z.jsx)("div",{children:Object(z.jsx)(b.a,{style:{width:"50%",marginBottom:"10px"},id:"outlined-basic",label:"Email",variant:"outlined",value:r.email,onChange:function(e){return P(e,"email")}})}),Object(z.jsx)("div",{children:Object(z.jsxs)(v.a,{sx:{m:1,width:"50%"},variant:"outlined",children:[Object(z.jsx)(y.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(z.jsx)(k.a,{id:"outlined-adornment-password",type:O.showPassword?"text":"password",value:r.password,onChange:function(e){return P(e,"password")},endAdornment:Object(z.jsx)(T.a,{position:"end",children:Object(z.jsx)(w.a,{"aria-label":"toggle password visibility",onClick:function(){return C(Object(j.a)(Object(j.a)({},O),{},{showPassword:!O.showPassword}))},onMouseDown:function(e){return e.preventDefault()},edge:"end",children:O.showPassword?Object(z.jsx)(f.a,{}):Object(z.jsx)(p.a,{})})}),label:"Password"})]})}),Object(z.jsx)("div",{children:Object(z.jsxs)(v.a,{sx:{m:1,width:"50%"},variant:"outlined",children:[Object(z.jsx)(y.a,{htmlFor:"outlined-adornment-password",children:"Confirm Password"}),Object(z.jsx)(k.a,{id:"outlined-adornment-password",type:O.showVerifyPassword?"text":"password",value:r.passwordVerify,onChange:function(e){return P(e,"passwordVerify")},endAdornment:Object(z.jsx)(T.a,{position:"end",children:Object(z.jsx)(w.a,{"aria-label":"toggle password visibility",onClick:function(){return C(Object(j.a)(Object(j.a)({},O),{},{showVerifyPassword:!O.showVerifyPassword}))},onMouseDown:function(e){return e.preventDefault()},edge:"end",children:O.showVerifyPassword?Object(z.jsx)(f.a,{}):Object(z.jsx)(p.a,{})})}),label:"Password"})]})}),Object(z.jsx)("div",{style:{margin:"auto"},children:Object(z.jsx)(b.a,{type:"text",style:{width:"50%",marginBottom:"10px"},id:"outlined-basic",label:"Company",variant:"outlined",value:r.company,onChange:function(e){return P(e,"company")}})}),Object(z.jsx)("div",{style:{marginBottom:"15px"},children:Object(z.jsx)(S.a,{style:{display:O.isBusy,margin:"auto"}})}),O.requestMessage?Object(z.jsx)("div",{style:{marginBottom:"15px",color:O.requestMsgColor},children:Object(z.jsx)(h.a,{style:{width:"40%",margin:"auto"},severity:"#03945f"===O.requestMsgColor?"success":"error",children:O.requestMessage})}):null,Object(z.jsx)(g.a,{sx:{width:"40%",borderRadius:"20px",marginBottom:"15px",backgroundColor:"#54008c"},onClick:function(e){return E(e)},variant:"contained",disabled:O.buttonDisabled,children:"Sign Up"})]})})}var J=a(123),Y=a(121),Z=a.n(Y),$=a(122),Q=a.n($),X=a(159),ee=a(332),te=a(336),ae=a(334),ne=a(335),re=a(333),ce=a(307),se=a(38);function oe(e){var t=e.open,a=e.userSelected,n=e.setOpen,r=e.handleDelete,c=e.deleteIsBusy,s=e.deleteModalMsg,o=Object(se.a)(),i=Object(ce.a)(o.breakpoints.down("md"));return Object(z.jsx)("div",{children:Object(z.jsxs)(ee.a,{fullScreen:i,open:t,onClose:function(){return n(!1)},"aria-labelledby":"responsive-dialog-title",children:[Object(z.jsx)(re.a,{id:"responsive-dialog-title",children:"User ".concat(a," will be deleted")}),Object(z.jsx)(ae.a,{children:Object(z.jsx)(ne.a,{children:"Are you sure?. This action cannot be undone."})}),s?Object(z.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:s}):null,Object(z.jsx)("div",{style:{display:c?"block":"none",marginLeft:"auto",marginRight:"auto"},children:Object(z.jsx)(S.a,{})}),Object(z.jsxs)(te.a,{children:[Object(z.jsx)(g.a,{autoFocus:!0,onClick:function(){return n(!1)},children:"Cancel"}),Object(z.jsx)(g.a,{onClick:function(){return r()},autoFocus:!0,children:"Yes"})]})]})})}function ie(){var e=r.a.useContext(P),t=e.navigation,a=e.setNavigation,c=Object(M.f)(),s=Object(n.useState)(!1),i=Object(o.a)(s,2),d=i[0],b=i[1],g=Object(n.useState)({userSelected:"",deleteIsBusy:!1,deleteModalMsg:""}),x=Object(o.a)(g,2),p=x[0],h=x[1],m=K([]),O=Object(o.a)(m,3),f=O[0],v=O[1],y=O[2],k=[{field:"name",headerName:"User Name",width:100},{field:"lastName",headerName:"Last Name",width:130,hide:!1},{field:"fullName",headerName:"Full name",description:"This column has a value getter and is not sortable.",sortable:!1,width:160,hide:!0,valueGetter:function(e){return"".concat(e.getValue(e.id,"firstName")||""," ").concat(e.getValue(e.id,"lastName")||"")}},{field:"email",headerName:"Email",width:200},{field:"role",headerName:"Role",width:130},{field:"action",headerName:"Options",description:"This column is for action buttons like edit or delete",sortable:!1,width:160,renderCell:function(e){var t=!("Administrator"===localStorage.getItem("role")&&"Supervisor"===e.row.role);return Object(z.jsx)("div",{style:{margin:"auto"},children:t?Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(w.a,{onClick:function(){console.log("Passed parameter: "+String(e.row.email)),c("/update-user",{replace:!1,state:{email:e.row.email}})},children:Object(z.jsx)(X.a,{title:"Edit",placement:"left",children:Object(z.jsx)(Z.a,{})})}),Object(z.jsx)(w.a,{onClick:function(){h({deleteModalMsg:""}),b(!0),h(Object(j.a)(Object(j.a)({},p),{},{userSelected:e.row.email}))},children:Object(z.jsx)(X.a,{title:"Delete",placement:"right-end",children:Object(z.jsx)(Q.a,{})})})]}):null})}}],T=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h({deleteIsBusy:!0,deleteModalMsg:""}),console.log("pressed deleting user "+String(p.userSelected)),e.next=5,y("DELETE",L.DELETEUSER,!0,{email:p.userSelected,accessToken:localStorage.getItem("accessToken")});case 5:t=e.sent,console.log(t),"Token has expired"===t.msg&&c("/log-in"),"Operation Succeded"===t.msg&&(S(),b(!1),h({deleteIsBusy:!1,deleteModalMsg:t.msg})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("GET",L.FETCHUSERS,!0,{accessToken:localStorage.getItem("accessToken"),company:localStorage.getItem("company")});case 3:t=e.sent,console.log(t),"Token has expired"===t.msg&&c("/log-in"),"Success Fetching"===t.msg&&v(t.users),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a(Object(j.a)(Object(j.a)({},t),{},{currentPage:"Users"})),S()}),[]),Object(z.jsxs)("div",{style:{height:400,width:"80%",marginLeft:"auto",marginRight:"auto",marginTop:"100px",padding:"15px",borderRadius:"10px",backgroundColor:"rgba(0, 0, 0, 0)"},children:[Object(z.jsx)("h1",{style:{textAlign:"center",fontWeight:600},children:"Users"}),Object(z.jsx)(J.a,{rows:f.map((function(e,t){return{id:t+1,name:e.name,lastName:e.lastName,email:e.email,role:e.role}})),columns:k,pageSize:5,rowsPerPageOptions:[5],sx:{}}),Object(z.jsx)(oe,{open:d,userSelected:p.userSelected,setOpen:b,handleDelete:T,deleteIsBusy:p.deleteIsBusy,deleteModalMsg:p.deleteModalMsg})]})}var le="Operator",ue="Administrator",de="Supervisor",je={visualizationOptions:["Visualization","Historic"],userOptions:["Home","Profile","Users"],tanksOptions:["Tanks"]},be={emailError:"",passwordError:""};function ge(e){var t=null;switch(e){case de:case ue:case le:t=je.tanksOptions;break;default:t=null}return t}function xe(e){var t=null;switch(e){case de:case ue:t=je.userOptions;break;case le:t=je.userOptions.slice(0,2);break;default:t=null}return t}function pe(e){var t=null;switch(e){case de:case ue:case le:t=je.visualizationOptions;break;default:t=null}return t}function he(e){return!function(e){var t=e.trim();if(""===t)return!0;if(null===t)return!0;if(void 0===t)return!0;return!1}(e)?be.passwordError="":be.passwordError="Invalid Password",be.passwordError}function me(){var e=n.useContext(C),t=e.user,a=e.setUser,r=n.useContext(P),c=r.navigation,s=r.setNavigation,i=Object(M.f)();document.title="Log In";var x=K({password:"",emailText:"",showPassword:!1,emailError:"",passwordError:""}),O=Object(o.a)(x,3),E=O[0],I=O[1],N=O[2],A=n.useState({validEmail:!0,validPassword:!0}),D=Object(o.a)(A,2),R=(D[0],D[1],n.useState({progressVisibility:"none",disabledButton:!1,responseTextMessage:"",responseMsgTextColor:"#000000"})),V=Object(o.a)(R,2),B=V[0],W=V[1],F=function(e,t){I(Object(j.a)(Object(j.a)({},E),{},Object(d.a)({},t,e.target.value)))},U=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c,s,o,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.preventDefault(),null,l=E.emailText,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(l).toLowerCase())?be.emailError="":be.emailError="Invalid Email",r=be.emailError,c=he(E.password),s="",o="#000000",u=!1,console.log("LOG TO UPLOAD PROJECT IN OTHER BRANCH"),console.log("COMMIT FOR DEV DEV"),I(Object(j.a)(Object(j.a)({},E),{},{emailError:r,passwordError:c})),W({progressVisibility:"block",disabledButton:!0}),r||c){e.next=25;break}return console.log(E.password),e.next=16,N("POST",L.LOGIN,!1,{email:E.emailText,password:E.password});case 16:d=e.sent,console.log(d),"Succesfully authenticated"===d.msg?(o="#03945f",u=!0):("Password incorect"===d.msg||"User not found"===d.msg||"Account has not been activated, please check your email for confirming your account."===d.msg)&&(o="#940303"),s=d.msg,W({progressVisibility:"none",disabledButton:!1,responseTextMessage:s,responseMsgTextColor:o}),console.log(u),u&&(localStorage.setItem("accessToken",d.access_token),localStorage.setItem("email",d.user.email),localStorage.setItem("refreshToken",d.refresh_token),localStorage.setItem("name",d.user.name),localStorage.setItem("lastName",d.user.last_name),localStorage.setItem("company",d.user.company),localStorage.setItem("role",d.user.role),a(Object(j.a)(Object(j.a)({},t),{},{access_token:localStorage.getItem("accessToken")})),W({progressVisibility:"none",disabledButton:!1}),i("/tanks-monitor")),e.next=26;break;case 25:W({progressVisibility:"none",disabledButton:!1});case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),"Failed to fetch"===e.t0.message&&W({progressVisibility:"none",disabledButton:!1,responseTextMessage:"Please check your internet connection and try again",responseMsgTextColor:""});case 31:case"end":return e.stop()}var l}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="#940303",e.next=3,N("POST",L.RESEND_CONFIRMATION_EMAIL,!1,{email:E.emailText});case 3:n=e.sent,console.log("-----print resent email response------"),console.log(n),"Confirmation email successfully resent"===n.msg&&(a="#065fcc"),W(Object(j.a)(Object(j.a)({},B),{},{responseTextMessage:n.msg,responseMsgTextColor:a}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.useEffect((function(){s(Object(j.a)(Object(j.a)({},c),{},{currentPage:"Log In"}))}),[]),Object(z.jsx)("div",{style:{textAlign:"center",marginTop:"90px",paddingTop:"50px"},children:Object(z.jsxs)(m.a,{sx:{borderRadius:"20px",width:"70%",height:"auto",paddingTop:"20px",paddingBottom:"20px",marginLeft:"auto",marginRight:"auto",backgroundColor:""},children:[Object(z.jsx)("h1",{style:{fontSize:"50px"},children:"Log In"}),Object(z.jsx)("div",{style:{marginBottom:"10px"},children:Object(z.jsx)(b.a,{style:{width:"60%"},id:"outlined-basic",label:"Email",variant:"outlined",type:"text",value:E.emailText,onChange:function(e){return F(e,"emailText")},onKeyUp:function(e){"Enter"===e.code&&U(e)}})}),Object(z.jsx)("div",{style:{width:"60%",margin:"auto",marginBottom:"10px"},children:E.emailError?Object(z.jsx)(h.a,{severity:"error",children:"Please type valid email address"}):null}),Object(z.jsx)("div",{children:Object(z.jsxs)(v.a,{sx:{m:1,width:"60%"},variant:"outlined",children:[Object(z.jsx)(y.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(z.jsx)(k.a,{id:"outlined-adornment-password",type:E.showPassword?"text":"password",value:E.password,onChange:function(e){return F(e,"password")},onKeyUp:function(e){"Enter"===e.code&&U(e)},endAdornment:Object(z.jsx)(T.a,{position:"end",children:Object(z.jsx)(w.a,{"aria-label":"toggle password visibility",onClick:function(){I(Object(j.a)(Object(j.a)({},E),{},{showPassword:!E.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end",children:E.showPassword?Object(z.jsx)(f.a,{}):Object(z.jsx)(p.a,{})})}),label:"Password"})]})}),Object(z.jsx)("div",{style:{width:"60%",margin:"auto",marginBottom:"5px"},children:E.passwordError?Object(z.jsx)(h.a,{severity:"error",children:"Please type your password correctly"}):null}),Object(z.jsx)("div",{style:{display:B.progressVisibility},children:Object(z.jsx)(S.a,{})}),Object(z.jsx)("div",{style:{color:B.responseMsgTextColor,display:B.responseTextMessage?"block":"none",width:"60%",margin:"auto",marginBottom:"5px"},children:function(e,t){console.log("------PRINTING BUSYPROPS----------"),console.log(e),console.log(t);var a=t.emailText,n=Object(z.jsx)(h.a,{severity:"Succesfully authenticated"===e?"success":"error",children:e});if(e)switch(e){case"Account has not been activated, please check your email for confirming your account.":n=Object(z.jsxs)(h.a,{severity:"error",children:[e,". If you have not received confirmation email, ",Object(z.jsx)("a",{onClick:function(){return _(a)},href:"#",children:"please click here to resend confirmation email"}),"."]})}else n=null;return n}(B.responseTextMessage,E)}),Object(z.jsx)("div",{style:{marginBottom:"15px"},children:Object(z.jsx)(g.a,{disabled:B.disabledButton,sx:{width:"40%",borderRadius:"20px",backgroundColor:"#54008c"},onClick:function(e){return U(e)},variant:"contained",children:"Log In"})}),Object(z.jsx)("a",{href:"#",children:"Forgot password?"})]})})}var Oe=a(48),fe=a(133);function ve(){var e=Object(M.f)(),t=Object(M.e)(),a=Object(n.useState)({isBusy:!1,alertSeverity:"",msg:""}),r=Object(o.a)(a,2),c=r[0],s=r[1],i=K({id:null,name:"",lastName:"",email:"",role:"Operator"}),x=Object(o.a)(i,3),p=x[0],O=x[1],f=x[2],k=function(e,t){O(Object(j.a)(Object(j.a)({},p),{},Object(d.a)({},t,e.target.value)))},T=function(e){var t="";"Failed to fetch"===e.message&&(t="Please check your internet connection and try again."),s({isBusy:!1,msg:t,alertSeverity:"error"})},w=function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(p),t.next=4,f("PUT",L.UPDATEUSER,!0,{accessToken:localStorage.getItem("accessToken"),user:p});case 4:n=t.sent,console.log(n),"Token has expired"===n.msg&&e("/log-in"),"Succesfully updated"===n.msg&&(s({isBusy:!1,msg:n.msg,alertSeverity:"success"}),O({id:n.user.id,name:n.user.name,lastName:n.user.lastName,email:n.user.email,role:n.user.role})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),T(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var a=Object(u.a)(l.a.mark((function a(){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s({isBusy:!0,msg:""}),a.next=4,f("GET",L.FETCHUSER,!0,{accessToken:localStorage.getItem("accessToken"),email:t.state.email});case 4:n=a.sent,console.log(n),"Token has expired"===n.msg&&e("/log-in"),"Succesfully fetched"===n.msg&&(s({isBusy:!1,msg:n.msg,alertSeverity:"success"}),O({id:n.user.id,name:n.user.name,lastName:n.user.lastName,email:n.user.email,role:n.user.role})),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),T(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){C()}),[]),Object(z.jsxs)(m.a,{style:{height:400,width:"80%",marginLeft:"auto",marginRight:"auto",marginTop:"100px",padding:"15px",borderRadius:"10px",backgroundColor:"rgba(0, 0, 0, 0)",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center"},children:[Object(z.jsx)("h1",{children:"Input new data"}),Object(z.jsx)("div",{children:Object(z.jsx)(b.a,{style:{width:"50%",marginBottom:"15px"},id:"outlined-basic",label:"Name",variant:"outlined",value:p.name,onChange:function(e){return k(e,"name")}})}),Object(z.jsx)("div",{children:Object(z.jsx)(b.a,{style:{width:"50%",marginBottom:"15px"},id:"outlined-basic",label:"Last Name",variant:"outlined",value:p.lastName,onChange:function(e){return k(e,"lastName")}})}),Object(z.jsx)("div",{children:Object(z.jsx)(b.a,{style:{width:"50%",marginBottom:"10px"},id:"outlined-basic",label:"Email",variant:"outlined",value:p.email,onChange:function(e){return k(e,"email")}})}),Object(z.jsx)("div",{children:Object(z.jsxs)(v.a,{sx:{marginBottom:"10px",width:"50%"},children:[Object(z.jsx)(y.a,{id:"demo-simple-select-label",children:"Role"}),Object(z.jsxs)(fe.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:p.role,label:"Role",onChange:function(e){return k(e,"role")},children:[Object(z.jsx)(Oe.a,{value:"Supervisor",children:"Supervisor"}),Object(z.jsx)(Oe.a,{value:"Administrator",children:"Administrator"}),Object(z.jsx)(Oe.a,{value:"Operator",children:"Operator"})]})]})}),Object(z.jsx)("div",{style:{display:c.isBusy?"block":"none"},children:Object(z.jsx)(S.a,{})}),c.msg?Object(z.jsx)("div",{style:{width:"50%",marginLeft:"auto",marginRight:"auto",marginTop:"10px"},children:Object(z.jsx)(h.a,{severity:c.alertSeverity,children:c.msg})}):null,Object(z.jsx)("div",{style:{marginTop:"10px"},children:Object(z.jsx)(g.a,{variant:"contained",sx:{width:"50%",borderRadius:"15px"},onClick:function(e){return w(e)},children:"Update"})})]})}var ye=a(176),ke=a.n(ye),Te=a(124),we=a.n(Te),Se=a(125),Me=a.n(Se);function Ce(e){var t=e.open,a=e.tankSelected,n=e.handleClose,r=e.handleDelete,c=e.deleteIsBusy,s=e.deleteModalMsg,o=Object(se.a)(),i=Object(ce.a)(o.breakpoints.down("md"));return Object(z.jsx)("div",{children:Object(z.jsxs)(ee.a,{fullScreen:i,open:t,onClose:n,"aria-labelledby":"responsive-dialog-title",children:[Object(z.jsx)(re.a,{id:"responsive-dialog-title",children:"Tank ".concat(a," will be deleted")}),Object(z.jsx)(ae.a,{children:Object(z.jsx)(ne.a,{children:"Are you sure?. This action cannot be undone."})}),s?Object(z.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:s}):null,Object(z.jsx)("div",{style:{display:c?"block":"none",marginLeft:"auto",marginRight:"auto"},children:Object(z.jsx)(S.a,{})}),Object(z.jsxs)(te.a,{children:[Object(z.jsx)(g.a,{autoFocus:!0,onClick:function(){return n()},children:"Cancel"}),Object(z.jsx)(g.a,{onClick:function(){return r()},autoFocus:!0,children:"Yes"})]})]})})}var Pe=[{id:1,lastName:"Snow",firstName:"Jon",age:35},{id:2,lastName:"Lannister",firstName:"Cersei",age:42},{id:3,lastName:"Lannister",firstName:"Jaime",age:45},{id:4,lastName:"Stark",firstName:"Arya",age:16},{id:5,lastName:"Targaryen",firstName:"Daenerys",age:null},{id:6,lastName:"Melisandre",firstName:null,age:150},{id:7,lastName:"Clifford",firstName:"Ferrara",age:44},{id:8,lastName:"Frances",firstName:"Rossini",age:36},{id:9,lastName:"Roxie",firstName:"Harvey",age:65}];function Ee(){var e=Object(M.f)(),t=r.a.useContext(P),a=t.navigation,c=t.setNavigation,s=r.a.useContext(C),i=s.user,d=s.setUser,b=r.a.useContext(E),x=(b.tankContextData,b.setTankContextData),h=K(Pe),m=Object(o.a)(h,3),O=m[0],f=m[1],v=m[2],y=r.a.useState(!1),k=Object(o.a)(y,2),T=k[0],S=k[1],I=Object(n.useState)({isBusy:!1,tankSelected:"",deleteIsBusy:!1,deleteModalMsg:""}),N=Object(o.a)(I,2),A=N[0],D=N[1],R=function(){var t=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,D(Object(j.a)(Object(j.a)({},A),{},{deleteIsBusy:!0,deleteModalMsg:""})),t.next=4,v("DELETE",L.DELETETANK,!0,{tankId:A.tankSelected,accessToken:localStorage.getItem("accessToken")});case 4:a=t.sent,console.log(a.msg),"Token has expired"===a.msg?e("log-in"):"Operation Succeded"===a.msg?(B(),D(Object(j.a)(Object(j.a)({},A),{},{deleteIsBusy:!1,deleteModalMsg:a.msg})),S(!1)):(D(Object(j.a)(Object(j.a)({},A),{},{deleteIsBusy:!1,deleteModalMsg:a.msg})),S(!0)),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),V=[{field:"id",headerName:"ID",width:70},{field:"tankId",headerName:"Tank ID",width:130},{field:"lastName",headerName:"Last name",width:130,hide:!0},{field:"fullName",headerName:"Full name",description:"This column has a value getter and is not sortable.",sortable:!1,width:160,hide:!0,valueGetter:function(e){return"".concat(e.getValue(e.id,"firstName")||""," ").concat(e.getValue(e.id,"lastName")||"")}},{field:"action",headerName:"Options",description:"This column is for action buttons like edit or delete",sortable:!1,width:160,renderCell:function(t){return Object(z.jsxs)("div",{style:{margin:"auto"},children:[Object(z.jsx)(w.a,{onClick:function(){console.log("Passed parameter: "+String(t.row.tankId)),e("/details-tank",{state:{tankId:t.row.tankId}})},children:Object(z.jsx)(X.a,{title:"Details",placement:"left-start",children:Object(z.jsx)(p.a,{})})}),"Administrator"===localStorage.getItem("role")||"Supervisor"===localStorage.getItem("role")?Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(w.a,{onClick:function(){console.log("Passed parameter: "+String(t.row.tankId)),x({tankSelected:t.row.tankId}),e("/modify-tank",{replace:!1,state:{tankId:t.row.tankId}})},children:Object(z.jsx)(X.a,{title:"Edit",placement:"top",children:Object(z.jsx)(Z.a,{})})}),Object(z.jsx)(w.a,{onClick:function(){D(Object(j.a)(Object(j.a)({},A),{},{tankSelected:t.row.tankId,deleteModalMsg:""})),S(!0)},children:Object(z.jsx)(X.a,{title:"Delete",placement:"right-end",children:Object(z.jsx)(Q.a,{})})})]}):null]})}}];function B(){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v("GET",L.FETCHTANKS,!0,{accessToken:localStorage.getItem("accessToken")});case 3:"Success fetching"===(a=t.sent).msg?(a.tanks.length||console.log("no data "),f(a.tanks)):"Token has expired"===a.msg&&(d({name:"",lastName:"",email:"",company:"",access_token:""}),e("/log-in")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){c(Object(j.a)(Object(j.a)({},a),{},{currentPage:"Tanks List"})),B()}),[]),Object(z.jsxs)("div",{style:{height:400,width:"60%",marginLeft:"auto",marginRight:"auto",marginTop:"100px",padding:"15px",borderRadius:"10px",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:[Object(z.jsxs)("h1",{style:{textAlign:"center"},children:[i.company," Tanks"]}),Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginBottom:"15px"},children:[Object(z.jsx)(g.a,{sx:{borderRadius:"10px"},variant:"contained",startIcon:Object(z.jsx)(ke.a,{}),onClick:function(){return e("/add-tank")},children:"Add"}),Object(z.jsx)(g.a,{sx:{borderRadius:"10px",backgroundColor:"#9e6a03"},variant:"contained",startIcon:Object(z.jsx)(we.a,{}),onClick:function(){return e("/tanks-monitor")},children:"Visualization"}),Object(z.jsx)(g.a,{sx:{borderRadius:"10px",backgroundColor:"#085c02"},variant:"contained",startIcon:Object(z.jsx)(Me.a,{}),onClick:function(){return e("/historic")},children:"Historic"})]}),Object(z.jsx)(J.a,{rows:O.map((function(e,t){return{id:t+1,tankId:e}})),columns:V,pageSize:5,rowsPerPageOptions:[5],sx:{}}),Object(z.jsx)(Ce,{open:T,tankSelected:A.tankSelected,handleClose:function(){S(!1)},handleDelete:R,deleteIsBusy:A.deleteIsBusy,deleteModalMsg:A.deleteModalMsg})]})}var Ie=a(308);function Ne(e){var t=null;return e.tankId.replace(" ","")&&e.WtrLvlMin&&e.WtrLvlMax&&e.OxygenPercentageMin&&e.OxygenPercentageMax&&e.PhMin&&e.PhMax?parseFloat(e.WtrLvlMin)>parseFloat(e.WtrLvlMax)?t="Error: Water Level Min Value cannot be greater than Max Value":parseFloat(e.OxygenPercentageMin)>parseFloat(e.OxygenPercentageMax)?t="Error: Oxygen Percentage Min Value cannot be greater than Max Value":parseFloat(e.PhMin)>parseFloat(e.PhMax)&&(t="Error: PH Min Value cannot be greater than Max Value"):t="Error: All fields must be filled",t}function Le(){var e=Object(M.f)(),t=r.a.useContext(C),a=(t.user,t.setUser),c=K({tankId:"",WtrLvlMin:"",WtrLvlMax:"",OxygenPercentageMin:"",OxygenPercentageMax:"",PhMin:"",PhMax:""}),s=Object(o.a)(c,3),i=s[0],x=s[1],p=s[2],O=Object(n.useState)({fieldsValidationErrorString:"",alertSeverity:"",isBusy:!1,displayAlert:!1}),f=Object(o.a)(O,2),v=f[0],y=f[1],k=function(e,t){x(Object(j.a)(Object(j.a)({},i),{},Object(d.a)({},t,e.target.value)))},T=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),console.log(i),y(Object(j.a)(Object(j.a)({},v),{},{isBusy:!0,displayAlert:!1})),n=Ne(i),console.log(n),!n){t.next=10;break}y(Object(j.a)(Object(j.a)({},v),{},{fieldsValidationErrorString:n,displayAlert:!0,alertSeverity:"error"})),t.next=16;break;case 10:return r="",t.next=13,p("POST",L.ADDTANK,!0,{tankId:i.tankId,WtrLvlMin:i.WtrLvlMin,WtrLvlMax:i.WtrLvlMax,OxygenPercentageMin:i.OxygenPercentageMin,OxygenPercentageMax:i.OxygenPercentageMax,PhMin:i.PhMin,PhMax:i.PhMax,accessToken:localStorage.getItem("accessToken"),company:localStorage.getItem("company")});case 13:"Token has expired"===(c=t.sent).msg?e("/log-in"):("Tank already added, please modify or delete."===c.msg||"Success adding"===c.msg)&&(r="success"),"Token has expired"!==c.msg&&y(Object(j.a)(Object(j.a)({},v),{},{fieldsValidationErrorString:c.msg,alertSeverity:r,displayAlert:!0,isBusy:!1}));case 16:t.next=23;break;case 18:t.prev=18,t.t0=t.catch(0),s="","Failed to fetch"===t.t0.message&&(s="Please check your internet connection and try again."),y(Object(j.a)(Object(j.a)({},v),{},{fieldsValidationErrorString:s,alertSeverity:"error",isBusy:!1}));case 23:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("company name is: "+localStorage.getItem("company")),t.next=4,p("GET",L.GETUSER,!0,{accessToken:localStorage.getItem("accessToken")});case 4:"Token has expired"===t.sent.msg&&(a({name:"",lastName:"",email:"",company:"",access_token:""}),e("/log-in")),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),n="","Failed to fetch"===t.t0.message&&(n="Something went wrong with connection, please check your internet"),y(Object(j.a)(Object(j.a)({},v),{},{fieldsValidationErrorString:n,displayAlert:!0,alertSeverity:"error"}));case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(z.jsxs)(m.a,{component:"form",noValidate:!0,sx:{marginLeft:"auto",marginRight:"auto",marginTop:"100px",padding:"10px",width:"50%",justifyContent:"center",backgroundColor:"rgba(255,255,255, 0.8)",borderRadius:"15px",textAlign:"center"},autoComplete:"off",children:[Object(z.jsx)("h1",{children:"Type parameters"}),Object(z.jsx)("div",{style:{marginTop:"5px",marginBottom:"10px"},children:Object(z.jsx)(b.a,{id:"outlined-basic",label:"Tank Id",variant:"outlined",value:i.tankId,onChange:function(e){return k(e,"tankId")}})}),Object(z.jsx)(Ie.a,{children:"Water Level Values"}),Object(z.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(z.jsx)(b.a,{sx:{},id:"outlined-basic",label:"Min",type:"number",variant:"outlined",value:i.WtrLvlMin,onChange:function(e){return k(e,"WtrLvlMin")}}),Object(z.jsx)(b.a,{id:"outlined-basic",label:"Max",type:"number",variant:"outlined",value:i.WtrLvlMax,onChange:function(e){return k(e,"WtrLvlMax")}})]}),Object(z.jsx)(Ie.a,{children:"%Oxygen Values"}),Object(z.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(z.jsx)(b.a,{sx:{},id:"outlined-basic",label:"Min",type:"number",variant:"outlined",value:i.OxygenPercentageMin,onChange:function(e){return k(e,"OxygenPercentageMin")}}),Object(z.jsx)(b.a,{id:"outlined-basic",label:"Max",type:"number",variant:"outlined",value:i.OxygenPercentageMax,onChange:function(e){return k(e,"OxygenPercentageMax")}})]}),Object(z.jsx)(Ie.a,{children:"PH Values"}),Object(z.jsxs)("div",{style:{marginTop:"10px"},children:[Object(z.jsx)(b.a,{sx:{},id:"outlined-basic",label:"Min",type:"number",variant:"outlined",value:i.PhMin,onChange:function(e){return k(e,"PhMin")}}),Object(z.jsx)(b.a,{id:"outlined-basic",label:"Max",type:"number",variant:"outlined",value:i.PhMax,onChange:function(e){return k(e,"PhMax")}})]}),Object(z.jsx)("div",{style:{display:v.isBusy?"block":"none"},children:Object(z.jsx)(S.a,{})}),v.displayAlert?Object(z.jsx)("div",{style:{width:"70%",marginLeft:"auto",marginRight:"auto",marginTop:"10px"},children:Object(z.jsx)(h.a,{severity:v.alertSeverity,children:v.fieldsValidationErrorString})}):null,Object(z.jsx)("div",{style:{marginTop:"10px"},children:Object(z.jsx)(g.a,{variant:"contained",sx:{width:"50%",borderRadius:"15px"},onClick:function(e){return T(e)},children:"Add"})})]})}var Ae=a(18),De=a(317),Re=a(95),Ve=a(76);function Be(e){var t=e.data,a=e.tankSelected,r=e.datesRange,c=Object(n.useState)({WtrLvlValues:[],OxygenPercentageValues:[],PhValues:[],timestamp:[]}),s=Object(o.a)(c,2),i=s[0],l=s[1];return Object(n.useEffect)((function(){if(t&&a){var e=t.filter((function(e){return e.tank_name===a}));if(e.length>0){var n=new Date(r.startDate).getTime()/1e3,c=new Date(r.endDate).getTime()/1e3,s=e[0],o=[],i=[],u=[],d=[];console.log("---------ALL DATA FROM TANK----------------"),console.log(s),s.timestamp.forEach((function(e,t){e>=n&&e<=c&&(o.push(s.WtrLvlValues[t]),i.push(s.OxygenPercentageValues[t]),u.push(s.PhValues[t]),d.push(s.timestamp[t]))})),l({WtrLvlValues:o,OxygenPercentageValues:i,PhValues:u,timestamp:d.map((function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}))})}}}),[a,t,r]),Object(z.jsx)("div",{children:Object(z.jsx)(Ve.b,{data:{labels:i.timestamp,datasets:[{label:"Water Level",data:i.WtrLvlValues,fill:!1,borderColor:"rgb(33, 122, 237)",tension:.1},{label:"Oxygen Percentage",data:i.OxygenPercentageValues,fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1},{label:"Ph Values",data:i.PhValues,fill:!1,borderColor:"rgb(69, 30, 0)",tension:.1}]}})})}var We=r.a.forwardRef((function(e,t){return Object(z.jsx)(h.a,Object(j.a)({elevation:6,ref:t,variant:"filled"},e))}));function Fe(){var e=Object(n.useContext)(C),t=(e.user,e.setUser),a=r.a.useContext(P),c=a.navigation,s=a.setNavigation,i=Object(M.f)(),g=Object(n.useState)(null),x=Object(o.a)(g,2),p=(x[0],x[1]),h=Object(n.useState)({startDate:new Date,endDate:new Date}),O=Object(o.a)(h,2),f=O[0],k=O[1],T=Object(n.useState)([]),w=Object(o.a)(T,2),S=w[0],E=w[1],I=Object(n.useState)(null),A=Object(o.a)(I,2),D=A[0],R=A[1],V=K([]),B=Object(o.a)(V,3),W=B[0],F=B[1],U=B[2],_=Object(n.useState)({notificationMessage:"",notificationType:""}),H=Object(o.a)(_,2),G=H[0],q=H[1],J=Object(n.useState)(!1),Y=Object(o.a)(J,2),Z=Y[0],$=Y[1],Q=function(e,t){"clickaway"!==t&&$(!1)},X=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(Re.a)(N),p(a),a.on("connect",(function(){console.log("Successfully connected to socket!"),a.emit("join_user_sessionid",{email:localStorage.getItem("email"),company:localStorage.getItem("company")}),$(!0),q({notificationMessage:"Successfully connected",notificationType:"success"})})),a.on("success_joinning",(function(e){console.log("message from server conection: "+e.message)})),a.on("get_historic_data",(function(e){te(e)})),a.on("connect_error",(function(e){return console.log("connect_error: "+e.message)})),a.on("connect_failed",(function(e){return console.log("connect_failed: "+e.message)})),a.on("disconnect",(function(e){$(!0),q({notificationMessage:"Connection lost :(",notificationType:"error"})})),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e,t){var a=e.target.value,n=t;k((function(e){var t={},r="";return"startDate"===n&&a>e.endDate?(r="Start Date cannot be greater than End Date.",t=Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},n,e.startDate))):"endDate"===n&&a<e.startDate?(r="End Date cannot be smaller than Start Date.",t=Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},n,e.endDate))):t=Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},n,a)),r&&alert(r),t}))},te=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("------HISTORIC DATA FROM SERVER-------"),console.log(t),F((function(e){var a=[];return e.forEach((function(e){var n=t.id.indexOf(e.tank_name),r={tank_name:e.tank_name,WtrLvlValues:[].concat(Object(Ae.a)(e.WtrLvlValues),[t.WtrLvl[n]]),OxygenPercentageValues:[].concat(Object(Ae.a)(e.OxygenPercentageValues),[t.OxygenPercentage[n]]),PhValues:[].concat(Object(Ae.a)(e.PhValues),[t.Ph[n]]),timestamp:[].concat(Object(Ae.a)(e.timestamp),[t.timestamp[n]])};a.push(r)})),a}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ae(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.map((function(e){return e.tank_name})),R(a[0]),E(a),F(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){s(Object(j.a)(Object(j.a)({},c),{},{currentPage:"Historic Visualization"}));var e=null,a=function(){var a=Object(u.a)(l.a.mark((function a(){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,U("GET",L.FETCHHISTORIC,!0,{accessToken:localStorage.getItem("accessToken"),company:localStorage.getItem("company")});case 3:if("Token has expired"!==(n=a.sent).msg){a.next=9;break}t({name:"",lastName:"",email:"",company:"",access_token:""}),i("/log-in"),a.next=14;break;case 9:if("Successfully fetched"!==n.msg){a.next=14;break}return a.next=12,X(n);case 12:e=a.sent,ae(n.data);case 14:a.next=18;break;case 16:a.prev=16,a.t0=a.catch(0);case 18:case"end":return a.stop()}}),a,null,[[0,16]])})));return function(){return a.apply(this,arguments)}}();return e||a(),function(){console.log(e),e&&e.close()}}),[]),Object(z.jsxs)(m.a,{component:"form",noValidate:!0,sx:{marginLeft:"auto",marginRight:"auto",marginTop:"100px",padding:"10px",width:"50%",justifyContent:"center",backgroundColor:"rgba(255,255,255, 0.8)",borderRadius:"15px",textAlign:"center"},autoComplete:"off",children:[Object(z.jsx)("h1",{style:{color:"black",fontWeight:600},children:"Historic Data"}),D?Object(z.jsxs)(v.a,{fullWidth:!0,children:[Object(z.jsx)(y.a,{id:"demo-simple-select-label",children:"Select Tank"}),Object(z.jsx)(fe.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:D,label:"Select Tank",onChange:function(e){R(e.target.value)},children:S.map((function(e){return Object(z.jsx)(Oe.a,{value:e,children:e},e)}))})]}):null,Object(z.jsxs)("div",{style:{marginTop:"20px",marginBottom:"20px"},children:[Object(z.jsx)(b.a,{id:"date",label:"Start Date",type:"date",defaultValue:"2022/02/03",sx:{width:220},InputLabelProps:{shrink:!0},value:f.startDate,onChange:function(e){return ee(e,"startDate")}}),Object(z.jsx)(b.a,{id:"date",label:"End Date",type:"date",defaultValue:"2022/02/03",sx:{width:220},InputLabelProps:{shrink:!0},value:f.endDate,onChange:function(e){return ee(e,"endDate")}})]}),Object(z.jsx)(Be,{data:W,tankSelected:D,datesRange:f}),Object(z.jsx)(De.a,{open:Z,autoHideDuration:3e3,onClose:function(e,t){return Q(0,t)},children:G.notificationType?Object(z.jsx)(We,{onClose:function(e,t){return Q(0,t)},severity:G.notificationType,sx:{width:"100%"},children:G.notificationMessage}):null})]})}var Ue=a(192),_e=a(309),He=a(4),Ge=a(29);function Ke(e){Object(M.f)();var t=e.tankId,a=e.tank;return console.log("----DATA SECTION TANK DATA--------"),console.log(a),Object(n.useEffect)((function(){}),[]),Object(z.jsxs)("div",{style:{width:"40%",backgroundColor:"",textAlign:"center"},children:[Object(z.jsx)("div",{style:{marginBottom:"15px"},children:Object(z.jsx)(g.a,{sx:{backgroundColor:"#54008c"},variant:"contained",children:Object(z.jsx)(Ge.b,{style:{textDecoration:"none",color:"white"},to:"/tanks",children:"Go back"})})}),Object(z.jsx)("h2",{children:t}),Object(z.jsx)("h4",{children:"Water Level"}),Object(z.jsxs)(_e.a,{justifyContent:"center",direction:"row",spacing:2,children:[Object(z.jsxs)("span",{children:["Min: ",a?a.WtrLvlMin:"--"]}),Object(z.jsxs)("span",{children:["Max: ",a?a.WtrLvlMax:"--"]})]}),Object(z.jsx)("h4",{children:"%Oxygen"}),Object(z.jsxs)(_e.a,{justifyContent:"center",direction:"row",spacing:2,children:[Object(z.jsxs)("span",{children:["Min: ",a?a.OxygenPercentageMin:"--"]}),Object(z.jsxs)("span",{children:["Max: ",a?a.OxygenPercentageMax:"--"]})]}),Object(z.jsx)("h4",{children:"Ph"}),Object(z.jsxs)(_e.a,{justifyContent:"center",direction:"row",spacing:2,children:[Object(z.jsxs)("span",{children:["Min: ",a?a.PhMin:"--"]}),Object(z.jsxs)("span",{children:["Max: ",a?a.PhMax:"--"]})]})]})}function ze(e){var t=e.tank,a=e.tankParameters,r=Object(n.useState)({labels:["Water Level","%Oxygen","Ph"],datasets:[{label:"",backgroundColor:["rgb(255, 99, 132)","rgb(54, 99, 132)","rgb(54, 99, 43)","rgb(54, 99, 43)","rgb(54, 99, 43)"],borderColor:"rgb(255, 99, 132)",data:[100,40,10]}]}),c=Object(o.a)(r,2),s=c[0],i=c[1],l=Object(n.useState)(null),u=Object(o.a)(l,2),d=u[0],b=u[1];return Object(n.useEffect)((function(){if(console.log("-------TANK DATA!------"),console.log(t),a){var e=(n=[a.WtrLvlMax,a.OxygenPercentageMax,a.PhMax],Math.max.apply(null,n));console.log(e),b({indexAxis:"x",scales:{y:{min:0,max:e+5}}})}var n;t&&(console.log("inside the update data"),i(Object(j.a)(Object(j.a)({},s),{},{datasets:[{label:"",backgroundColor:["rgb(255, 99, 132)","rgb(54, 99, 132)","rgb(54, 99, 43)","rgb(54, 99, 43)","rgb(54, 99, 43)"],borderColor:"rgb(255, 99, 132)",data:[t.WtrLvl,t.OxygenPercentage,t.Ph]}]})))}),[t.WtrLvl,t.OxygenPercentage,t.Ph,a.WtrLvlMax,a.OxygenPercentageMax,a.PhMax]),Object(z.jsx)("div",{style:{width:"60%",backgroundColor:""},children:Object(z.jsx)(Ve.a,{data:s,options:d})})}Object(He.a)(Ue.a)((function(e){var t=e.theme;return Object(j.a)(Object(j.a)({},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})}));var qe=r.a.forwardRef((function(e,t){return Object(z.jsx)(h.a,Object(j.a)({elevation:6,ref:t,variant:"filled"},e))}));function Je(){var e=Object(n.useContext)(C),t=(e.user,e.setUser),a=Object(M.e)(),r=Object(M.f)(),c=K({WtrLvl:null,OxygenPercentage:null,Ph:null}),s=Object(o.a)(c,3),i=s[0],d=s[1],j=s[2],b=Object(n.useState)({WtrLvl:null,OxygenPercentage:null,Ph:null,WtrLvlMax:null,OxygenPercentageMax:null,PhMax:null}),g=Object(o.a)(b,2),x=g[0],p=g[1],h=Object(n.useState)(null),m=Object(o.a)(h,2),O=(m[0],m[1]),f=Object(n.useState)({notificationMessage:"",notificationType:""}),v=Object(o.a)(f,2),y=v[0],k=v[1],T=Object(n.useState)(!1),w=Object(o.a)(T,2),S=w[0],P=w[1],E=function(e,t){"clickaway"!==t&&P(!1)},I=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.filter((function(e){return e.id==a.state.tankId}))).length&&d({WtrLvl:n[0].wtrLvlValue,OxygenPercentage:n[0].oxygenPercentageValue,Ph:n[0].phValue});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(Re.a)(N),O(a),a.on("connect",(function(){a.emit("join_user_sessionid",{email:localStorage.getItem("email"),company:localStorage.getItem("company")}),P(!0),k({notificationMessage:"Successfully connected",notificationType:"success"})})),a.on("success_joinning",(function(e){console.log("message from server conection: "+e.message)})),a.on("get_tank_data",(function(e){console.log("------TANK DATA FROM SERVER-------"),console.log(e),I(e)})),a.on("connect_error",(function(e){return console.log("connect_error: "+e.message)})),a.on("connect_failed",(function(e){return console.log("connect_failed: "+e.message)})),a.on("disconnect",(function(e){P(!0),k({notificationMessage:"Connection lost :(",notificationType:"error"})})),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=null,n=function(){var n=Object(u.a)(l.a.mark((function n(){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j("GET",L.FETCHTANK,!0,{accessToken:localStorage.getItem("accessToken"),tankId:a.state.tankId});case 3:if(c=n.sent,console.log(c),"Token has expired"!==c.msg){n.next=10;break}t({name:"",lastName:"",email:"",company:"",access_token:""}),r("/log-in"),n.next=17;break;case 10:if("Successfully fetched"!==c.msg){n.next=17;break}return console.log("-----DETAILS TANK DATA PARAMETERS----"),console.log(c.parameters),p({WtrLvlMin:c.parameters[0].tankMinValue,WtrLvlMax:c.parameters[0].tankMaxValue,OxygenPercentageMin:c.parameters[1].tankMinValue,OxygenPercentageMax:c.parameters[1].tankMaxValue,PhMin:c.parameters[2].tankMinValue,PhMax:c.parameters[2].tankMaxValue}),n.next=16,A(c);case 16:e=n.sent;case 17:return n.abrupt("return",e);case 20:n.prev=20,n.t0=n.catch(0),k({notificationMessage:"Could not stablish connection :(",notificationType:"error"}),P(!0);case 24:case"end":return n.stop()}}),n,null,[[0,20]])})));return function(){return n.apply(this,arguments)}}();return e||n(),function(){console.log(e),e&&e.close()}}),[]),Object(z.jsxs)("div",{style:{marginTop:"100px"},children:[Object(z.jsx)("div",{style:{textAlign:"center"},children:Object(z.jsx)("h1",{children:"Tank Visualization"})}),Object(z.jsx)("div",{style:{marginLeft:"auto",width:"100%"},children:Object(z.jsxs)(_e.a,{sx:{marginTop:"10px"},justifyContent:"center",direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},children:[Object(z.jsx)(Ke,{tankId:a.state.tankId,tank:x}),Object(z.jsx)(ze,{tank:{WtrLvl:i?i.WtrLvl:null,OxygenPercentage:i?i.OxygenPercentage:null,Ph:i?i.Ph:null},tankParameters:x})]})}),Object(z.jsx)(De.a,{open:S,autoHideDuration:3e3,onClose:function(e,t){return E(0,t)},children:y.notificationType?Object(z.jsx)(qe,{onClose:function(e,t){return E(0,t)},severity:y.notificationType,sx:{width:"100%"},children:y.notificationMessage}):null})]})}var Ye=a(316),Ze=a(321),$e=a(255),Qe=a(303);function Xe(e){var t=e.scaleRanges,a=e.setScaleRanges,r=e.tanksSelected,c=e.tanksData,s=e.category,i=Object(n.useState)(t.max),l=Object(o.a)(i,2),u=l[0],d=l[1],g=Object(n.useState)({data:{labels:["MT001"],datasets:[{label:"",backgroundColor:["rgb(255, 99, 132)","rgb(54, 99, 132)","rgb(54, 99, 43)","rgb(54, 99, 43)","rgb(54, 99, 43)"],borderColor:"rgb(255, 99, 132)",data:[8]}]},options:{indexAxis:"x",scales:{y:{min:0,max:u}}}}),x=Object(o.a)(g,2),p=x[0],h=x[1];return Object(n.useEffect)((function(){console.log(p.options);var e=[],a=[],n=[],o=null;console.log("PRINTING SELECTED TANKS DATA IN CHART COMPONENT"),console.log(r),console.log("PRINTING TANKS DATA"),console.log(c),r.length&&c.length&&(r.forEach((function(t,r){console.log("TANK SELECTED IS "+t);var s=c.filter((function(e){return e.id==t}));console.log("PRINTING TANK DATA OBJECT"),console.log(s),void 0!==(s=s[0])&&null!==s&&(e.push(s.wtrLvlValue),a.push(s.oxygenPercentageValue),n.push(s.phValue))})),console.log(e),"Water Level"===s?o=e:"%Oxygen"===s?o=a:"Ph"===s&&(o=n)),h({data:{labels:r,datasets:[{label:"",backgroundColor:["rgb(255, 99, 132)","rgb(54, 99, 132)","rgb(54, 99, 43)","rgb(54, 99, 43)","rgb(54, 99, 43)"],borderColor:"rgb(255, 99, 132)",data:o}]},options:Object(j.a)(Object(j.a)({},p.options),{},{scales:{y:t}})})}),[t,r,c,s]),Object(z.jsxs)("div",{children:[Object(z.jsx)(b.a,{id:"outlined-basic",sx:{minWidth:"50px"},label:"Max Value",type:"number",variant:"outlined",value:u,onChange:function(e){d(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&(e.target.value>0&&a(Object(j.a)(Object(j.a)({},t),{},{max:parseInt(e.target.value)})),console.log("Enter pressed!"))}}),Object(z.jsx)(Ve.a,{data:p.data,options:p.options})]})}var et=a(331),tt=a(319),at=a(310),nt=a(189),rt=a(311),ct=a(191);function st(e){var t=n.useState([0]),a=Object(o.a)(t,2),r=a[0],c=a[1],s=e.allTanks,i=e.updateTanksSelected,l=function(e){return function(){var t=r.indexOf(e),a=Object(Ae.a)(r);-1===t?a.push(e):a.splice(t,1),-1!==a.indexOf(0)&&a.splice(a.indexOf(0),1),i(a),c(a)}};return Object(z.jsx)(et.a,{sx:{width:"100%",maxWidth:360,borderRadius:"10px"},children:s.map((function(e){var t="checkbox-list-label-".concat(e);return Object(z.jsx)(tt.a,{sx:{margin:"auto"},disablePadding:!0,children:Object(z.jsxs)(at.a,{role:void 0,onClick:l(e),dense:!0,children:[Object(z.jsx)(nt.a,{children:Object(z.jsx)(ct.a,{edge:"start",checked:-1!==r.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(z.jsx)(rt.a,{sx:{color:"#000000",fontStyle:"bold",fontWeight:500},id:t,primary:e})]})},e)}))})}var ot=["Water Level","%Oxygen","Ph"],it=(Object(He.a)(Ue.a)((function(e){var t=e.theme;return Object(j.a)(Object(j.a)({},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})})),r.a.forwardRef((function(e,t){return Object(z.jsx)(h.a,Object(j.a)({elevation:6,ref:t,variant:"filled"},e))})));var lt=function(){document.title="Visualization";var e=Object(M.f)(),t=r.a.useContext(P),a=t.navigation,c=t.setNavigation,s=Object(n.useContext)(C),i=(s.user,s.setUser),d=Object(n.useState)(!1),b=Object(o.a)(d,2),g=b[0],x=b[1],p=Object(n.useState)([]),h=Object(o.a)(p,2),m=h[0],O=h[1],f=K([]),y=Object(o.a)(f,3),k=y[0],T=y[1],w=y[2],S=Object(n.useState)([]),E=Object(o.a)(S,2),I=E[0],N=E[1],A=Object(n.useState)({name:"",lastName:"",email:"",company:""}),D=Object(o.a)(A,2),R=(D[0],D[1],Object(n.useState)(null)),V=Object(o.a)(R,2),B=(V[0],V[1]),W=Object(n.useState)({notificationMessage:"",notificationType:""}),F=Object(o.a)(W,2),U=F[0],_=F[1],H=Object(n.useState)({min:0,max:500}),G=Object(o.a)(H,2),q=G[0],J=G[1],Y=Object(n.useState)("Water Level"),Z=Object(o.a)(Y,2),$=Z[0],Q=Z[1],X=function(e,t){"clickaway"!==t&&x(!1)},ee=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=Object(Re.a)("https://api.ratizales.mx/private");return t.on("connect",(function(){x(!0),B(t),_({notificationMessage:"Successfully connected",notificationType:"success"}),console.log("email "+e.email),console.log("name "+e.name),e.email&&t.emit("join_user_sessionid",{email:e.email,company:e.company})})),t.on("message",(function(e){console.log("message from server conection: "+e)})),t.on("success_joinning",(function(e){console.log("message from server conection: "+e.message)})),t.on("tanks_data",(function(e){console.log("----FROM SOCKET TANKS DATA------"),console.log(e),N(e)})),t.on("connect_error",(function(e){return console.log("connect_error: "+e.message)})),t.on("connect_failed",(function(e){return console.log("connect_failed: "+e.message)})),t.on("disconnect",(function(e){x(!0),_({notificationMessage:"Connection lost :(",notificationType:"error"})})),t};return Object(n.useEffect)((function(){c(Object(j.a)(Object(j.a)({},a),{},{currentPage:"Monitor Tanks"}));var t=null;function n(){return(n=Object(u.a)(l.a.mark((function a(){var n,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=!1,a.next=4,w("GET",L.FETCHTANKS,!0,{accessToken:localStorage.getItem("accessToken")});case 4:"Success fetching"===(r=a.sent).msg?(n=!0,T(r.tanks),i({name:r.name,email:r.email,role:r.role,company:r.company})):"Token has expired"===r.msg&&(localStorage.setItem("accessToken",""),localStorage.setItem("refreshToken",""),i({name:"",lastName:"",email:"",company:"",access_token:""}),e("/log-in")),n&&(t=te(r)),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),_({notificationMessage:"Could not stablish connection :(",notificationType:"error"}),x(!0);case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))).apply(this,arguments)}return t||function(){n.apply(this,arguments)}(),function(){t&&t.close()}}),[]),Object(z.jsxs)("div",{style:{marginTop:"90px",color:"black"},children:[Object(z.jsxs)("div",{style:{textAlign:"center"},children:[Object(z.jsxs)("h1",{style:{fontSize:"30px",fontWeight:500},children:[localStorage.getItem("company")," Tanks"]}),Object(z.jsxs)(v.a,{component:"fieldset",children:[Object(z.jsx)(Qe.a,{sx:{color:"black"},component:"legend",children:"Select a Category"}),Object(z.jsxs)(Ze.a,{row:!0,"aria-label":"gender",defaultValue:"Water Level",name:"radio-buttons-group",onChange:function(e){console.log(e.target.value),Q(e.target.value)},children:[Object(z.jsx)($e.a,{value:ot[0],control:Object(z.jsx)(Ye.a,{sx:{color:"black"}}),label:ot[0]}),Object(z.jsx)($e.a,{value:ot[1],control:Object(z.jsx)(Ye.a,{sx:{color:"black"}}),label:ot[1]}),Object(z.jsx)($e.a,{value:ot[2],control:Object(z.jsx)(Ye.a,{sx:{color:"black"}}),label:ot[2]})]})]})]}),Object(z.jsxs)(_e.a,{direction:{xs:"column",sm:"row"},justifyContent:"space-evenly",alignItems:"center",spacing:2,mt:5,children:[Object(z.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.7)",padding:"10px",borderRadius:"15px",width:"auto"},children:[Object(z.jsx)("h3",{style:{color:"black",fontWeight:500},children:"Tanks Available"}),Object(z.jsx)(st,{allTanks:k,updateTanksSelected:ee})]}),Object(z.jsx)("div",{style:{width:"60%",marginLeft:"15px",backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:"15px",padding:"15px"},children:Object(z.jsx)(Xe,{scaleRanges:q,setScaleRanges:J,tanksSelected:m,tanksData:I,category:$})})]}),Object(z.jsx)(De.a,{open:g,autoHideDuration:3e3,onClose:function(){return X()},children:U.notificationType?Object(z.jsx)(it,{onClose:X,severity:U.notificationType,sx:{width:"100%"},children:U.notificationMessage}):null})]})},ut=a(328),dt=a(327),jt=a(134),bt=a(184),gt=a.n(bt),xt=a(325),pt=a(183),ht=a.n(pt),mt=a(322),Ot=a(182),ft=a.n(Ot),vt=a(180),yt=a.n(vt),kt=a(181),Tt=a.n(kt);function wt(e){var t,a=0;for(t=0;t<e.length;t+=1)a=e.charCodeAt(t)+((a<<5)-a);var n="#";for(t=0;t<3;t+=1){n+="00".concat((a>>8*t&255).toString(16)).substr(-2)}return n}function St(e){var t=e.toggleDrawer,a=e.state;console.log(localStorage.getItem("role"));var n,r,c=function(e){var t=null,a="/";switch(e){case"Profile":t=Object(z.jsx)(yt.a,{}),a="/profile";break;case"Home":t=Object(z.jsx)(Tt.a,{}),a="/";break;case"Visualization":t=Object(z.jsx)(we.a,{}),a="/tanks-monitor";break;case"Historic":t=Object(z.jsx)(Me.a,{}),a="/historic";break;case"Users":t=Object(z.jsx)(ft.a,{}),a="/users";break;case"Tanks":t=Object(z.jsx)(ht.a,{}),a="/tanks";break;default:t=null}return Object(z.jsx)(Ge.b,{style:{textDecoration:"none",color:"black"},to:a,children:Object(z.jsxs)(tt.a,{button:!0,children:[Object(z.jsx)(nt.a,{children:t}),Object(z.jsx)(rt.a,{primary:e})]},e)})};return Object(z.jsxs)(xt.a,{anchor:"left",open:a.left,onClose:t("left",!1),children:[Object(z.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",marginTop:"10px"},children:Object(z.jsx)(mt.a,Object(j.a)({},(r="".concat(localStorage.getItem("name")," ").concat(localStorage.getItem("lastName")),{sx:{bgcolor:wt(r),margin:"auto",width:150,height:150,fontSize:"70px"},children:"".concat(r.split(" ")[0][0]).concat(r.split(" ")[1][0])})))}),(n="left",Object(z.jsxs)(m.a,{sx:{width:"top"===n||"bottom"===n?"auto":250},role:"presentation",onClick:t(n,!1),onKeyDown:t(n,!1),children:[Object(z.jsx)(et.a,{children:localStorage.getItem("role")?xe(localStorage.getItem("role")).map((function(e,t){return c(e)})):null}),Object(z.jsx)(Ie.a,{}),Object(z.jsx)(et.a,{children:localStorage.getItem("role")?pe(localStorage.getItem("role")).map((function(e,t){return c(e)})):null}),Object(z.jsx)(Ie.a,{}),Object(z.jsx)(et.a,{children:ge(localStorage.getItem("role"))?ge(localStorage.getItem("role")).map((function(e,t){return c(e)})):null})]}))]})}function Mt(){var e={textDecoration:"none",color:"white"},t={color:"white"},a=n.useContext(P),r=a.navigation,c=a.setNavigation,s=n.useContext(C),i=s.user,l=s.setUser,u=n.useState({left:!1}),b=Object(o.a)(u,2),x=b[0],p=b[1],h=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&p(Object(j.a)(Object(j.a)({},x),{},Object(d.a)({},e,t)))}};return Object(z.jsx)(m.a,{sx:{flexGrow:1},style:{position:"fixed",top:0,right:0,width:"100%",zIndex:1},children:Object(z.jsx)(ut.a,{position:"static",sx:{backgroundColor:"#54008c"},children:Object(z.jsxs)(dt.a,{children:[i.access_token||localStorage.getItem("accessToken")?Object(z.jsx)(w.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:h("left",!0),children:Object(z.jsx)(gt.a,{sx:{fontSize:"40px"}})}):null,Object(z.jsx)(St,{toggleDrawer:h,state:x}),Object(z.jsx)(jt.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:r.currentPage}),i.access_token||localStorage.getItem("accessToken")?Object(z.jsxs)(n.Fragment,{children:[Object(z.jsx)(g.a,{onClick:function(){return c(Object(j.a)(Object(j.a)({},r),{},{currentPage:"Home"}))},style:t,color:"inherit",children:Object(z.jsx)(Ge.b,{to:"/",style:e,children:"Home"})}),Object(z.jsx)(g.a,{color:"inherit",onClick:function(){localStorage.setItem("accessToken",""),localStorage.setItem("refreshToken",""),l({name:"",lastName:"",company:"",access_token:""})},style:t,children:Object(z.jsx)(Ge.b,{to:"/log-in",style:e,children:"Log Out"})})]}):Object(z.jsxs)(n.Fragment,{children:[Object(z.jsx)(g.a,{onClick:function(){return c(Object(j.a)(Object(j.a)({},r),{},{currentPage:"Home"}))},style:t,color:"inherit",children:Object(z.jsx)(Ge.b,{to:"/",style:e,children:"Home"})}),Object(z.jsx)(g.a,{onClick:function(){return c(Object(j.a)(Object(j.a)({},r),{},{currentPage:"Sign Up"}))},style:t,color:"inherit",children:Object(z.jsx)(Ge.b,{to:"/sign-up",style:e,children:"Sign Up"})}),Object(z.jsx)(g.a,{color:"inherit",onClick:function(){return c(Object(j.a)(Object(j.a)({},r),{},{currentPage:"Log In"}))},style:t,children:Object(z.jsx)(Ge.b,{to:"/log-in",style:e,children:"Log In"})})]})]})})})}var Ct=a(323),Pt=Object(He.a)(Ue.a)((function(e){var t=e.theme;return Object(j.a)(Object(j.a)({},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",width:"100%",color:t.palette.text.secondary})})),Et={margin:"auto"},It=r.a.forwardRef((function(e,t){return Object(z.jsx)(h.a,Object(j.a)({elevation:6,ref:t,variant:"filled"},e))}));function Nt(e){var t,a=0;for(t=0;t<e.length;t+=1)a=e.charCodeAt(t)+((a<<5)-a);var n="#";for(t=0;t<3;t+=1){n+="00".concat((a>>8*t&255).toString(16)).substr(-2)}return n}function Lt(){var e=r.a.useContext(C),t=(e.user,e.setUser),a=r.a.useContext(P),c=a.navigation,s=a.setNavigation,i=Object(n.useState)(!1),d=Object(o.a)(i,2),b=d[0],g=d[1],x=Object(M.f)();document.title="User";var p,h=K({name:"",lastName:"",email:"",role:"",company:""}),m=Object(o.a)(h,3),O=m[0],f=m[1],v=m[2],y=Object(n.useState)({notificationMessage:"",notificationType:""}),k=Object(o.a)(y,2),T=k[0],w=k[1],S=function(e,t){"clickaway"!==t&&g(!1)};return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("GET",L.GETUSER,!0,{accessToken:localStorage.getItem("accessToken")});case 3:"Succesfully authenticated"===(a=e.sent).msg?(f({name:a.name,lastName:a.last_name,email:a.email,role:a.role,company:a.company}),w({notificationMessage:"Successfully connected",notificationType:"success"}),g(!0)):"Token has expired"===a.msg&&(localStorage.setItem("accessToken",""),localStorage.setItem("refreshToken",""),t({name:"",lastName:"",email:"",company:"",access_token:""}),x("/log-in")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),w({notificationMessage:"Could not stablish connection :(",notificationType:"error"}),g(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}s(Object(j.a)(Object(j.a)({},c),{},{currentPage:"Profile"})),function(){e.apply(this,arguments)}()}),[]),Object(z.jsxs)("div",{style:{padding:"5px"},children:[Object(z.jsx)("div",{style:{marginTop:"100px",width:"100%"},children:O.name&&O.lastName?Object(z.jsx)(mt.a,Object(j.a)({},(p="".concat(O.name," ").concat(O.lastName),{sx:{bgcolor:Nt(p),margin:"auto",width:150,height:150,fontSize:"70px"},children:"".concat(p.split(" ")[0][0]).concat(p.split(" ")[1][0])}))):Object(z.jsx)(Ct.a,{variant:"circular",width:150,height:150,style:{margin:"auto"}})}),Object(z.jsx)(_e.a,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},justifyContent:"space-evenly",alignItems:"center",mt:2,children:Object(z.jsx)(Pt,{children:Object(z.jsxs)("div",{children:[O.name?Object(z.jsxs)("h1",{children:["Name: ",O.name," ",O.lastName]}):Object(z.jsx)(Ct.a,{style:Et,width:"50%",height:50}),O.email?Object(z.jsxs)("h1",{children:["Email: ",O.email]}):Object(z.jsx)(Ct.a,{style:Et,width:"50%",height:50}),O.role?Object(z.jsxs)("h1",{children:["Role: ",O.role]}):Object(z.jsx)(Ct.a,{style:Et,width:"50%",height:50}),O.company?Object(z.jsxs)("h1",{children:["Works at: ",O.company]}):Object(z.jsx)(Ct.a,{style:Et,width:"50%",height:50})]})})}),Object(z.jsx)(De.a,{open:b,autoHideDuration:3e3,onClose:function(){return S()},children:Object(z.jsx)(It,{onClose:function(){return S()},severity:T.notificationType,sx:{width:"100%"},children:T.notificationMessage})})]})}var At=a(313),Dt=a(312);function Rt(){var e=Object(M.f)(),t=Object(M.e)(),a=K({tankId:"",WtrLvlMin:"",WtrLvlMax:"",OxygenPercentageMin:"",OxygenPercentageMax:"",PhMin:"",PhMax:""}),c=Object(o.a)(a,3),s=c[0],i=c[1],x=c[2],p=Object(n.useState)({isBusy:!1,msg:"",alertSeverity:"success"}),O=Object(o.a)(p,2),f=O[0],v=O[1],y=function(e,t){i(Object(j.a)(Object(j.a)({},s),{},Object(d.a)({},t,e.target.value)))},k=function(e,t){var a={tankId:t,WtrLvlMin:"",WtrLvlMax:"",OxygenPercentageMin:"",OxygenPercentageMax:"",PhMin:"",PhMax:""};e.forEach((function(e,t){"WtrLvl"===e.parameter?(a.WtrLvlMin=e.tankMinValue,a.WtrLvlMax=e.tankMaxValue):"OxygenPercentage"===e.parameter?(a.OxygenPercentageMin=e.tankMinValue,a.OxygenPercentageMax=e.tankMaxValue):"Ph"===e.parameter&&(a.PhMin=e.tankMinValue,a.PhMax=e.tankMaxValue)})),console.log(a),i(a)},T=function(){var a=Object(u.a)(l.a.mark((function a(){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x("GET",L.FETCHTANK,!0,{accessToken:localStorage.getItem("accessToken"),tankId:t.state.tankId});case 3:n=a.sent,console.log(n),"Token has expired"===n.msg?e("/log-in"):"Successfully fetched"===n.msg&&(k(n.parameters,n.tankId),v({isBusy:!1,msg:n.msg,alertSeverity:"success"})),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),C(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}(),w=function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(s),v({isBusy:!0,msg:""}),t.next=5,x("POST",L.UPDATETANK,!0,{tankId:s.tankId,WtrLvlMin:s.WtrLvlMin,WtrLvlMax:s.WtrLvlMax,OxygenPercentageMin:s.OxygenPercentageMin,OxygenPercentageMax:s.OxygenPercentageMax,PhMin:s.PhMin,PhMax:s.PhMax,accessToken:localStorage.getItem("accessToken")});case 5:if("Token has expired"!==(n=t.sent).msg){t.next=10;break}e("log-in"),t.next=15;break;case 10:if("Succesfully updated"!==n.msg){t.next=14;break}v(Object(j.a)(Object(j.a)({},f),{},{msg:n.msg,alertSeverity:"success",isBusy:!1})),t.next=15;break;case 14:throw new Error("Unhandled Exception ".concat(n.msg,", please handle it."));case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),C(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),C=function(e){var t="";e.message.includes("Unhandled Exception")?t=e.message:"Failed to fetch"===e.message&&(t="Please check your internet connection and try again."),v(Object(j.a)(Object(j.a)({},f),{},{isBusy:!1,msg:t,alertSeverity:"error"}))};return Object(n.useEffect)((function(){T()}),[]),Object(z.jsx)(m.a,{component:"form",noValidate:!0,sx:{marginLeft:"auto",marginRight:"auto",marginTop:"100px",padding:"10px",width:"50%",justifyContent:"center",backgroundColor:"rgba(255,255,255, 0.8)",borderRadius:"15px",textAlign:"center"},autoComplete:"off",children:f.alertSeverity?Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)("h1",{children:"Please type new values"}),Object(z.jsx)("div",{style:{marginTop:"5px",marginBottom:"10px"},children:Object(z.jsx)(b.a,{id:"outlined-basic",label:"Tank Id",variant:"outlined",value:s.tankId,disabled:!0,onChange:function(e){return y(e,"tankId")}})}),Object(z.jsx)(Ie.a,{children:"Water Level Values"}),Object(z.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(z.jsx)(b.a,{sx:{},id:"outlined-basic",label:"Min",type:"number",variant:"outlined",value:s.WtrLvlMin,onChange:function(e){return y(e,"WtrLvlMin")}}),Object(z.jsx)(b.a,{id:"outlined-basic",label:"Max",type:"number",variant:"outlined",value:s.WtrLvlMax,onChange:function(e){return y(e,"WtrLvlMax")}})]}),Object(z.jsx)(Ie.a,{children:"%Oxygen Values"}),Object(z.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(z.jsx)(b.a,{sx:{},id:"outlined-basic",label:"Min",type:"number",variant:"outlined",value:s.OxygenPercentageMin,onChange:function(e){return y(e,"OxygenPercentageMin")}}),Object(z.jsx)(b.a,{id:"outlined-basic",label:"Max",type:"number",variant:"outlined",value:s.OxygenPercentageMax,onChange:function(e){return y(e,"OxygenPercentageMax")}})]}),Object(z.jsx)(Ie.a,{children:"PH Values"}),Object(z.jsxs)("div",{style:{marginTop:"10px"},children:[Object(z.jsx)(b.a,{sx:{},id:"outlined-basic",label:"Min",type:"number",variant:"outlined",value:s.PhMin,onChange:function(e){return y(e,"PhMin")}}),Object(z.jsx)(b.a,{id:"outlined-basic",label:"Max",type:"number",variant:"outlined",value:s.PhMax,onChange:function(e){return y(e,"PhMax")}})]}),Object(z.jsx)("div",{style:{display:f.isBusy?"block":"none"},children:Object(z.jsx)(S.a,{})}),f.msg?Object(z.jsx)("div",{style:{width:"70%",marginLeft:"auto",marginRight:"auto",marginTop:"10px"},children:Object(z.jsx)(h.a,{severity:f.alertSeverity,children:f.msg})}):null,Object(z.jsx)("div",{children:Object(z.jsx)(Ge.b,{to:"/tanks",children:"Go to tanks"})}),Object(z.jsx)("div",{style:{marginTop:"10px"},children:Object(z.jsx)(g.a,{variant:"contained",sx:{width:"50%",borderRadius:"15px"},onClick:function(e){return w(e)},children:"Update"})})]}):Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(Ct.a,{variant:"rectangular",width:"100%",height:50,sx:{marginLeft:"auto",marginRight:"auto",marginBottom:"10px"}}),Object(z.jsx)(Ct.a,{variant:"rectangular",width:"100%",height:50,sx:{marginLeft:"auto",marginRight:"auto",marginBottom:"10px"}}),Object(z.jsx)(Ct.a,{variant:"rectangular",width:"100%",height:50,sx:{marginLeft:"auto",marginRight:"auto",marginBottom:"10px"}}),Object(z.jsx)(Ct.a,{variant:"rectangular",width:"100%",height:50,sx:{marginLeft:"auto",marginRight:"auto"}})]})})}a(314),a.p;var Vt=function(){var e=Object(n.useState)({currentPage:""}),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({name:"",lastName:"",email:"",company:"",access_token:""}),s=Object(o.a)(c,2),i=s[0],l=s[1],u=Object(n.useState)({tankSelected:""}),d=Object(o.a)(u,2),j=d[0],b=d[1],g=Object(n.useMemo)((function(){return{navigation:a,setNavigation:r}}),[a,r]),x=Object(n.useMemo)((function(){return{user:i,setUser:l}}),[i,l]),p=Object(n.useMemo)((function(){return{tankContextData:j,setTankContextData:b}}),[j,b]);return Object(n.useEffect)((function(){i.name||l({name:localStorage.getItem("name"),lastName:localStorage.getItem("lastName"),email:localStorage.getItem("email"),company:localStorage.getItem("company")})}),[]),Object(z.jsx)(Ge.a,{children:Object(z.jsx)(P.Provider,{value:g,children:Object(z.jsx)(C.Provider,{value:x,children:Object(z.jsxs)(E.Provider,{value:p,children:[Object(z.jsx)(Mt,{}),Object(z.jsxs)(M.c,{children:[Object(z.jsx)(M.a,{path:"/",element:Object(z.jsx)(me,{})}),Object(z.jsx)(M.a,{path:"/sign-up",element:Object(z.jsx)(q,{})}),Object(z.jsx)(M.a,{path:"/log-in",element:Object(z.jsx)(me,{})}),Object(z.jsx)(M.a,{path:"/tanks-monitor",element:Object(z.jsx)(lt,{})}),Object(z.jsx)(M.a,{path:"/profile",element:Object(z.jsx)(Lt,{})}),Object(z.jsx)(M.a,{path:"/users",element:Object(z.jsx)(ie,{})}),Object(z.jsx)(M.a,{path:"/tanks",element:Object(z.jsx)(Ee,{})}),Object(z.jsx)(M.a,{path:"/add-tank",element:Object(z.jsx)(Le,{})}),Object(z.jsx)(M.a,{path:"/modify-tank",element:Object(z.jsx)(Rt,{})}),Object(z.jsx)(M.a,{path:"/details-tank",element:Object(z.jsx)(Je,{})}),Object(z.jsx)(M.a,{path:"/historic",element:Object(z.jsx)(Dt.a,{dateAdapter:At.a,children:Object(z.jsx)(Fe,{})})}),Object(z.jsx)(M.a,{path:"/update-user",element:Object(z.jsx)(ve,{})})]})]})})})})},Bt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,337)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(Vt,{})}),document.getElementById("root")),Bt()}},[[240,1,2]]]);
//# sourceMappingURL=main.12ec2c0b.chunk.js.map